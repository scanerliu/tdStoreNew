<#import "/common/app.ftl" as app> <!DOCTYPE html><html lang="en"><head>	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />    <meta http-equiv="Content-Language" content="zh-CN">    <meta name="keywords" content="${system.webkeywords!''}">    <meta name="description" content="${system.webkeywords!''}">    <meta name="copyright" content="${system.webkeywords!''}" />    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">    <meta content="yes" name="apple-mobile-web-app-capable">    <meta content="black" name="apple-mobile-web-app-status-bar-style">    <meta content="telephone=no" name="format-detection">    <link rel="shortcut icon" href="${app.basePath}/static/default/images/icon.ico" />    <title>股东竞选-  ${system.webkeywords!''}</title>    <!-- css -->    <link rel="stylesheet" href="${app.basePath}/static/default/client/style/site.css" type="text/css"/>    <link rel="stylesheet" type="text/css" href="${app.basePath}/static/default/client/style/personal-center-common.css">    <link rel="stylesheet" type="text/css" href="${app.basePath}/static/default/client/style/f_personal_center.css">    <link rel="stylesheet" type="text/css" href="${app.basePath}/static/default/client/style/lhead.css">    <link rel="stylesheet" type="text/css" href="${app.basePath}/static/default/client/style/index.css">    <link rel="stylesheet" type="text/css" href="${app.basePath}/static/default/client/style/has.css">    <!-- js -->    <#include "/common/common.ftl" />    <script type="text/javascript" src="${app.basePath}/static/js/jquery-1.12.3.min.js"></script>	<script type="text/javascript" src="${app.basePath}/static/js/client/html5.js"></script>	<script type="text/javascript" src="${app.basePath}/static/js/client/library.js"></script>	<!--通用js-->    <script type="text/javascript" src="${app.basePath}/static/js/client/core.js"></script>    <script type="text/javascript" src="${app.basePath}/static/js/client/common.js"></script>    <script type="text/javascript" src="${app.basePath}/static/js/client/user/compaign.js"></script>    <script src="${app.basePath}/static/js/uploadify/jquery.uploadify.js" type="text/javascript"></script>    <script type="text/javascript" src="${app.basePath}/static/js/Validform_v5.3.2_min.js"></script></head><body><h1 style="display:none;"></h1><!-- header_top --><#include "../common/centerheader.ftl"><!-- header_top end --><div class="clear"></div><!-- Center Start --><!-- Center Start --><div class="index-main">    <div class="personal-center">        <!-- 左侧导航 -->        <#include "../common/centerleftmenu.ftl">         <!-- 右侧内容 -->        <div class="change_password modify_personal" style="height:auto;">            <!-- 账户设置 -->            <form id="electionForm" action="${app.basePath}/user/saveElection" method="post">              <div class="h2">竞选资料填写</div>              <div class="info-list" style="margin-top:30px;">                 <label class="lab1 fl">竞选地区:</label>                <span id="provincespn"></span><span id="cityspn"></span><span id="regionspn"></span>                <input type="hidden" name="regionId" id="regionId" value="" nullmsg="请选择所在地区！"/>                <script>					$(function(){						getDistricts({'obj':null,'num':0,'total':3});				    });				</script>              </div>              <div class="info-list" style="margin-top:30px;" id="camdiv">              </div>              <div class="head-img" style="margin-top:30px;">                <div class="img">                  <img src="<#if currentUser.uavatar??><#if currentUser.uavatar?index_of("http")==0><#else>${app.basePath}</#if>${currentUser.uavatar!''}<#else>${app.basePath}/static/default/mobile/images/defaultavtar.png</#if>" alt="个人头像" id="csavatar"/>				  <input type="hidden" id="cuavatar" name="uavatar" nullmsg="请上传头像！" value="${currentUser.uavatar!''}">                </div>                <div class="right">                  <div id="file_upload"></div>                  <p>图片格式:GIF、JPG、JPEG、PNG,最适合尺寸100*100 像素</p>                </div>              </div>              <div class="info-list" style="margin-top:30px;">                <label Validform_label>姓名</label>                <input type="text" id="uname" name="uname" datatype="*2-20" value="${currentUser.unick!''}">              </div>              <div class="info-list" style="margin-top:30px;">              	<label Validform_label>竞选宣言</label>                <textarea style="height:220px;width:600px;margin-left:0px;margin-top: 0px;-webkit-appearance:none;" placeholder="请填写您的竞选宣言！" id="declaration" name="declaration" datatype="*6-100"></textarea>              </div>              <div class="info-list" style="margin-top:30px;">              	<label Validform_label>个人简介</label>                <textarea style="height:220px;width:600px;margin-left:0px;margin-top: 0px;-webkit-appearance:none;" placeholder="请填写您的个人简介！" id="resume" name="resume" datatype="*10-1000"></textarea>              </div>              <input class="btn-ok-modify" type="submit" value="确定">            </form>            <!-- 账户设置-结束 -->        </div>        <!-- 右侧内容 END -->    </div>    <div class="clear"></div></div><!-- Center End --><script>	$(function(){		$('#file_upload').uploadify({				'multi': false, // 限制单图上传				'auto': true,				'formData' : {'type' : 'userAvatar'},				'swf'      : basePath+'/static/js/uploadify/uploadify.swf', // swf存放的路径				'fileObjName' : 'file',				'uploader' : basePath+'/uploadify/upload/singleFile',    // 处理上传的Servlet				'buttonText' : '上传头像',				'onUploadSuccess' : function(file, data, response) {					var result = eval("("+data+")");					$("#csavatar").attr("src",basePath+result.savedFile);					$("#cuavatar").val(result.savedFile);					alert("头像上传成功。");					//$.messager.alert('消息提醒','图片' + file.name + ' 上传成功。 ');		        },		        'onUploadError' : function(file, errorCode, errorMsg, errorString) {		        	//alert('The file ' + file.name + ' could not be uploaded: ' + errorString);		        	//$.messager.alert('消息提醒','上传失败。');		        	alert("头像上传失败。");		        }		});		$("#electionForm").Validform({			tiptype:function(msg,o,cssctl){			    //msg：提示信息;			    //o:{obj:*,type:*,curform:*},			    //obj指向的是当前验证的表单元素（或表单对象，验证全部验证通过，提交表单时o.obj为该表单对象），			    //type指示提示的状态，值为1、2、3、4， 1：正在检测/提交数据，2：通过验证，3：验证失败，4：提示ignore状态, 			    //curform为当前form对象;			    //cssctl:内置的提示信息样式控制函数，该函数需传入两个参数：显示提示信息的对象 和 当前提示的状态（既形参o中的type）;			    if(o.type == 3){			    	alert(msg);			    }			},			beforeCheck:function(curform){			},			beforeSubmit:function(curform){				var cid = $("#cId").val();				if(cid==""){					alert("请选择有活动的地区！");					return false;				}			 	openwaiting();			},			postonce:true, // 开启二次提交防御			ajaxPost:true, 			callback:function(data){				//返回数据data是json对象，{"msg":"demo info","code":"1"}				//info: 输出提示信息;				//status: 返回提交数据的状态,是否提交成功。如可以用"y"表示提交成功，"n"表示提交失败，在ajax_post.php文件返回数据里自定字符，主要用在callback函数里根据该值执行相应的回调操作;				closewaiting();				alert(data.msg);				if(data.code == 1){					window.location.href=basePath+"/user/joinElection";				}			}		});	});</script><!-- Footer Start --><#include "../common/commonfooter.ftl"><!-- Footer End --></body></html>